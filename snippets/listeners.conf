# QUIC (HTTP/3) listeners - MUST come first
listen 443 quic reuseport;
# listen [::]:443 quic reuseport;

# Critical HTTP/3 header
add_header Alt-Svc 'h3=":443"; ma=2592000';

quic_retry on;
ssl_early_data on;
quic_gso on;

# HTTP/2 fallback listeners
listen 443 ssl;
# listen [::]:443 ssl;
# Critical HTTP/3 header
add_header Alt-Svc 'h3=":443"; ma=2592000';